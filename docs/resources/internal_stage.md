---
page_title: "snowflake_internal_stage Resource - terraform-provider-snowflake"
subcategory: "Preview"
description: |-
  Resource used to manage internal stages. For more information, check internal stage documentation https://docs.snowflake.com/en/sql-reference/sql/create-stage#internal-stage-parameters-internalstageparams.
---

!> **Caution: Preview Feature** This feature is considered a preview feature in the provider, regardless of the state of the resource in Snowflake. We do not guarantee its stability. It will be reworked and marked as a stable feature in future releases. Breaking changes are expected, even without bumping the major version. To use this feature, add the relevant feature name to `preview_features_enabled` field in the [provider configuration](https://registry.terraform.io/providers/snowflakedb/snowflake/latest/docs#schema). Please always refer to the [Getting Help](https://github.com/snowflakedb/terraform-provider-snowflake?tab=readme-ov-file#getting-help) section in our Github repo to best determine how to get help for your questions.

-> **Note** Temporary stages are not supported because they result in per-session objects.

-> **Note** External changes detection on the `encryption` field is not supported because Snowflake does not return encryption settings in DESCRIBE or SHOW STAGE output.

-> **Note** Due to Snowflake limitations, when `directory.auto_refresh` is set to a new value in the configuration, the resource is recreated. When it is unset, the provider alters the whole `directory` field with the `enable` value from the configuration.

# snowflake_internal_stage (Resource)

Resource used to manage internal stages. For more information, check [internal stage documentation](https://docs.snowflake.com/en/sql-reference/sql/create-stage#internal-stage-parameters-internalstageparams).

## Example Usage

-> **Note** Instead of using fully_qualified_name, you can reference objects managed outside Terraform by constructing a correct ID, consult [identifiers guide](../guides/identifiers_rework_design_decisions#new-computed-fully-qualified-name-field-in-resources).
<!-- TODO(SNOW-1634854): include an example showing both methods-->

```terraform
# basic resource
resource "snowflake_internal_stage" "basic" {
  name     = "my_internal_stage"
  database = "my_database"
  schema   = "my_schema"
}

# complete resource
resource "snowflake_internal_stage" "complete" {
  name     = "complete_stage"
  database = "my_database"
  schema   = "my_schema"

  encryption {
    snowflake_full {}
  }

  directory {
    enable       = true
    auto_refresh = false
  }

  comment = "Fully configured internal stage"
}
```

-> **Note** If a field has a default value, it is shown next to the type in the schema.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `database` (String) The database in which to create the stage. Due to technical limitations (read more [here](../guides/identifiers_rework_design_decisions#known-limitations-and-identifier-recommendations)), avoid using the following characters: `|`, `.`, `"`.
- `name` (String) Specifies the identifier for the stage; must be unique for the database and schema in which the stage is created. Due to technical limitations (read more [here](../guides/identifiers_rework_design_decisions#known-limitations-and-identifier-recommendations)), avoid using the following characters: `|`, `.`, `"`.
- `schema` (String) The schema in which to create the stage. Due to technical limitations (read more [here](../guides/identifiers_rework_design_decisions#known-limitations-and-identifier-recommendations)), avoid using the following characters: `|`, `.`, `"`.

### Optional

- `comment` (String) Specifies a comment for the stage.
- `directory` (Block List, Max: 1) Directory tables store a catalog of staged files in cloud storage. (see [below for nested schema](#nestedblock--directory))
- `encryption` (Block List, Max: 1) Specifies the encryption settings for the internal stage. (see [below for nested schema](#nestedblock--encryption))
- `file_format` (Block List, Max: 1) Specifies the file format for the stage. (see [below for nested schema](#nestedblock--file_format))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `describe_output` (List of Object) Outputs the result of `DESCRIBE STAGE` for the given stage. (see [below for nested schema](#nestedatt--describe_output))
- `fully_qualified_name` (String) Fully qualified name of the resource. For more information, see [object name resolution](https://docs.snowflake.com/en/sql-reference/name-resolution).
- `id` (String) The ID of this resource.
- `show_output` (List of Object) Outputs the result of `SHOW STAGES` for the given stage. (see [below for nested schema](#nestedatt--show_output))
- `stage_type` (String) Specifies a type for the stage. This field is used for checking external changes and recreating the resources if needed.

<a id="nestedblock--directory"></a>
### Nested Schema for `directory`

Required:

- `enable` (Boolean) Specifies whether to enable a directory table on the internal named stage.

Optional:

- `auto_refresh` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Specifies whether Snowflake should automatically refresh the directory table metadata when new or updated data files are available on the internal named stage.


<a id="nestedblock--encryption"></a>
### Nested Schema for `encryption`

Optional:

- `snowflake_full` (Block List, Max: 1) Client-side and server-side encryption. (see [below for nested schema](#nestedblock--encryption--snowflake_full))
- `snowflake_sse` (Block List, Max: 1) Server-side encryption only. (see [below for nested schema](#nestedblock--encryption--snowflake_sse))

<a id="nestedblock--encryption--snowflake_full"></a>
### Nested Schema for `encryption.snowflake_full`


<a id="nestedblock--encryption--snowflake_sse"></a>
### Nested Schema for `encryption.snowflake_sse`



<a id="nestedblock--file_format"></a>
### Nested Schema for `file_format`

Optional:

- `csv` (Block List, Max: 1) CSV file format options. (see [below for nested schema](#nestedblock--file_format--csv))
- `format_name` (String) Fully qualified name of the file format (e.g., 'database.schema.format_name').

<a id="nestedblock--file_format--csv"></a>
### Nested Schema for `file_format.csv`

Optional:

- `binary_format` (String) Defines the encoding format for binary input or output. Valid values: `HEX` | `BASE64` | `UTF8`.
- `compression` (String) Specifies the compression format. Valid values: `AUTO` | `GZIP` | `BZ2` | `BROTLI` | `ZSTD` | `DEFLATE` | `RAW_DEFLATE` | `NONE`.
- `date_format` (String) Defines the format of date values in the data files. Use `AUTO` to have Snowflake auto-detect the format.
- `empty_field_as_null` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Boolean that specifies whether to insert SQL NULL for empty fields in an input file. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `encoding` (String) Specifies the character set of the source data when loading data into a table. Valid values: `BIG5` | `EUCJP` | `EUCKR` | `GB18030` | `IBM420` | `IBM424` | `ISO2022CN` | `ISO2022JP` | `ISO2022KR` | `ISO88591` | `ISO88592` | `ISO88595` | `ISO88596` | `ISO88597` | `ISO88598` | `ISO88599` | `ISO885915` | `KOI8R` | `SHIFTJIS` | `UTF8` | `UTF16` | `UTF16BE` | `UTF16LE` | `UTF32` | `UTF32BE` | `UTF32LE` | `WINDOWS1250` | `WINDOWS1251` | `WINDOWS1252` | `WINDOWS1253` | `WINDOWS1254` | `WINDOWS1255` | `WINDOWS1256`.
- `error_on_column_count_mismatch` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Boolean that specifies whether to generate a parsing error if the number of delimited columns in an input file does not match the number of columns in the corresponding table. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `escape` (String) Single character string used as the escape character for field values. Use `NONE` to specify no escape character. NOTE: This value may be not imported properly from Snowflake. Snowflake returns escaped values.
- `escape_unenclosed_field` (String) Single character string used as the escape character for unenclosed field values only. Use `NONE` to specify no escape character. NOTE: This value may be not imported properly from Snowflake. Snowflake returns escaped values.
- `field_delimiter` (String) One or more singlebyte or multibyte characters that separate fields in an input file. Use `NONE` to specify no delimiter.
- `field_optionally_enclosed_by` (String) Character used to enclose strings. Use `NONE` to specify no enclosure character.
- `file_extension` (String) Specifies the extension for files unloaded to a stage.
- `multi_line` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Boolean that specifies whether to parse CSV files containing multiple records on a single line. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `null_if` (List of String) String used to convert to and from SQL NULL.
- `parse_header` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Boolean that specifies whether to use the first row headers in the data files to determine column names. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `record_delimiter` (String) One or more singlebyte or multibyte characters that separate records in an input file. Use `NONE` to specify no delimiter.
- `replace_invalid_characters` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Boolean that specifies whether to replace invalid UTF-8 characters with the Unicode replacement character. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `skip_blank_lines` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Boolean that specifies to skip any blank lines encountered in the data files. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `skip_byte_order_mark` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Boolean that specifies whether to skip the BOM (byte order mark) if present in a data file. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.
- `skip_header` (Number) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`-1`)) Number of lines at the start of the file to skip.
- `time_format` (String) Defines the format of time values in the data files. Use `AUTO` to have Snowflake auto-detect the format.
- `timestamp_format` (String) Defines the format of timestamp values in the data files. Use `AUTO` to have Snowflake auto-detect the format.
- `trim_space` (String) (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Boolean that specifies whether to remove white space from fields. Available options are: "true" or "false". When the value is not set in the configuration the provider will put "default" there which means to use the Snowflake default for this value.



<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `read` (String)
- `update` (String)


<a id="nestedatt--describe_output"></a>
### Nested Schema for `describe_output`

Read-Only:

- `directory_table` (List of Object) (see [below for nested schema](#nestedobjatt--describe_output--directory_table))
- `file_format` (List of Object) (see [below for nested schema](#nestedobjatt--describe_output--file_format))

<a id="nestedobjatt--describe_output--directory_table"></a>
### Nested Schema for `describe_output.directory_table`

Read-Only:

- `auto_refresh` (Boolean)
- `enable` (Boolean)


<a id="nestedobjatt--describe_output--file_format"></a>
### Nested Schema for `describe_output.file_format`

Read-Only:

- `csv` (List of Object) (see [below for nested schema](#nestedobjatt--describe_output--file_format--csv))
- `format_name` (String)

<a id="nestedobjatt--describe_output--file_format--csv"></a>
### Nested Schema for `describe_output.file_format.csv`

Read-Only:

- `binary_format` (String)
- `compression` (String)
- `date_format` (String)
- `empty_field_as_null` (Boolean)
- `encoding` (String)
- `error_on_column_count_mismatch` (Boolean)
- `escape` (String)
- `escape_unenclosed_field` (String)
- `field_delimiter` (String)
- `field_optionally_enclosed_by` (String)
- `file_extension` (String)
- `multi_line` (Boolean)
- `null_if` (List of String)
- `parse_header` (Boolean)
- `record_delimiter` (String)
- `replace_invalid_characters` (Boolean)
- `skip_blank_lines` (Boolean)
- `skip_byte_order_mark` (Boolean)
- `skip_header` (Number)
- `time_format` (String)
- `timestamp_format` (String)
- `trim_space` (Boolean)
- `type` (String)
- `validate_utf8` (Boolean)




<a id="nestedatt--show_output"></a>
### Nested Schema for `show_output`

Read-Only:

- `cloud` (String)
- `comment` (String)
- `created_on` (String)
- `database_name` (String)
- `directory_enabled` (Boolean)
- `endpoint` (String)
- `has_credentials` (Boolean)
- `has_encryption_key` (Boolean)
- `name` (String)
- `owner` (String)
- `owner_role_type` (String)
- `region` (String)
- `schema_name` (String)
- `storage_integration` (String)
- `type` (String)
- `url` (String)

## Import

Import is supported using the following syntax:

```shell
terraform import snowflake_internal_stage.example '"<database_name>"."<schema_name>"."<stage_name>"'
```
