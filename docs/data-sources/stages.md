---
page_title: "snowflake_stages Data Source - terraform-provider-snowflake"
subcategory: "Preview"
description: |-
  Data source used to get details of filtered stages. Filtering is aligned with the current possibilities for SHOW STAGES https://docs.snowflake.com/en/sql-reference/sql/show-stages query. The results of SHOW and DESCRIBE are encapsulated in one output collection stages.
---

!> **Caution: Preview Feature** This feature is considered a preview feature in the provider, regardless of the state of the resource in Snowflake. We do not guarantee its stability. It will be reworked and marked as a stable feature in future releases. Breaking changes are expected, even without bumping the major version. To use this feature, add the relevant feature name to `preview_features_enabled` field in the [provider configuration](https://registry.terraform.io/providers/snowflakedb/snowflake/latest/docs#schema). Please always refer to the [Getting Help](https://github.com/snowflakedb/terraform-provider-snowflake?tab=readme-ov-file#getting-help) section in our Github repo to best determine how to get help for your questions.

# snowflake_stages (Data Source)

Data source used to get details of filtered stages. Filtering is aligned with the current possibilities for [SHOW STAGES](https://docs.snowflake.com/en/sql-reference/sql/show-stages) query. The results of SHOW and DESCRIBE are encapsulated in one output collection `stages`.

## Example Usage

```terraform
# Simple usage
data "snowflake_stages" "simple" {
}

output "simple_output" {
  value = data.snowflake_stages.simple.stages
}

# Filtering (like)
data "snowflake_stages" "like" {
  like = "stage-name"
}

output "like_output" {
  value = data.snowflake_stages.like.stages
}

# Filtering by prefix (like)
data "snowflake_stages" "like_prefix" {
  like = "prefix%"
}

output "like_prefix_output" {
  value = data.snowflake_stages.like_prefix.stages
}

# Without additional data (to limit the number of calls make for every found stage)
data "snowflake_stages" "only_show" {
  # with_describe is turned on by default and it calls DESCRIBE STAGE for every stage found and attaches its output to stages.*.describe_output field
  with_describe = false
}

output "only_show_output" {
  value = data.snowflake_stages.only_show.stages
}

# Ensure the number of stages is equal to at least one element (with the use of postcondition)
data "snowflake_stages" "assert_with_postcondition" {
  like = "stage-name%"
  lifecycle {
    postcondition {
      condition     = length(self.stages) > 0
      error_message = "there should be at least one stage"
    }
  }
}

# Ensure the number of stages is equal to exactly one element (with the use of check block)
check "stage_check" {
  data "snowflake_stages" "assert_with_check_block" {
    like = "stage-name"
  }

  assert {
    condition     = length(data.snowflake_stages.assert_with_check_block.stages) == 1
    error_message = "stages filtered by '${data.snowflake_stages.assert_with_check_block.like}' returned ${length(data.snowflake_stages.assert_with_check_block.stages)} stages where one was expected"
  }
}
```

-> **Note** If a field has a default value, it is shown next to the type in the schema.

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `in` (Block List, Max: 1) IN clause to filter the list of objects (see [below for nested schema](#nestedblock--in))
- `like` (String) Filters the output with **case-insensitive** pattern, with support for SQL wildcard characters (`%` and `_`).
- `with_describe` (Boolean) (Default: `true`) Runs DESC STAGE for each stage returned by SHOW STAGES. The output of describe is saved to the describe_output field. By default this value is set to true.

### Read-Only

- `id` (String) The ID of this resource.
- `stages` (List of Object) Holds the aggregated output of all stages details queries. (see [below for nested schema](#nestedatt--stages))

<a id="nestedblock--in"></a>
### Nested Schema for `in`

Optional:

- `account` (Boolean) Returns records for the entire account.
- `application` (String) Returns records for the specified application.
- `application_package` (String) Returns records for the specified application package.
- `database` (String) Returns records for the current database in use or for a specified database.
- `schema` (String) Returns records for the current schema in use or a specified schema. Use fully qualified name.


<a id="nestedatt--stages"></a>
### Nested Schema for `stages`

Read-Only:

- `describe_output` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output))
- `show_output` (List of Object) (see [below for nested schema](#nestedobjatt--stages--show_output))

<a id="nestedobjatt--stages--describe_output"></a>
### Nested Schema for `stages.describe_output`

Read-Only:

- `directory_table` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--directory_table))
- `file_format` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--file_format))
- `location` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--location))
- `privatelink` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--privatelink))

<a id="nestedobjatt--stages--describe_output--directory_table"></a>
### Nested Schema for `stages.describe_output.directory_table`

Read-Only:

- `auto_refresh` (Boolean)
- `enable` (Boolean)


<a id="nestedobjatt--stages--describe_output--file_format"></a>
### Nested Schema for `stages.describe_output.file_format`

Read-Only:

- `avro` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--file_format--avro))
- `csv` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--file_format--csv))
- `format_name` (String)
- `json` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--file_format--json))
- `orc` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--file_format--orc))
- `parquet` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--file_format--parquet))
- `xml` (List of Object) (see [below for nested schema](#nestedobjatt--stages--describe_output--file_format--xml))

<a id="nestedobjatt--stages--describe_output--file_format--avro"></a>
### Nested Schema for `stages.describe_output.file_format.avro`

Read-Only:

- `compression` (String)
- `null_if` (List of String)
- `replace_invalid_characters` (Boolean)
- `trim_space` (Boolean)
- `type` (String)


<a id="nestedobjatt--stages--describe_output--file_format--csv"></a>
### Nested Schema for `stages.describe_output.file_format.csv`

Read-Only:

- `binary_format` (String)
- `compression` (String)
- `date_format` (String)
- `empty_field_as_null` (Boolean)
- `encoding` (String)
- `error_on_column_count_mismatch` (Boolean)
- `escape` (String)
- `escape_unenclosed_field` (String)
- `field_delimiter` (String)
- `field_optionally_enclosed_by` (String)
- `file_extension` (String)
- `multi_line` (Boolean)
- `null_if` (List of String)
- `parse_header` (Boolean)
- `record_delimiter` (String)
- `replace_invalid_characters` (Boolean)
- `skip_blank_lines` (Boolean)
- `skip_byte_order_mark` (Boolean)
- `skip_header` (Number)
- `time_format` (String)
- `timestamp_format` (String)
- `trim_space` (Boolean)
- `type` (String)
- `validate_utf8` (Boolean)


<a id="nestedobjatt--stages--describe_output--file_format--json"></a>
### Nested Schema for `stages.describe_output.file_format.json`

Read-Only:

- `allow_duplicate` (Boolean)
- `binary_format` (String)
- `compression` (String)
- `date_format` (String)
- `enable_octal` (Boolean)
- `file_extension` (String)
- `ignore_utf8_errors` (Boolean)
- `multi_line` (Boolean)
- `null_if` (List of String)
- `replace_invalid_characters` (Boolean)
- `skip_byte_order_mark` (Boolean)
- `strip_null_values` (Boolean)
- `strip_outer_array` (Boolean)
- `time_format` (String)
- `timestamp_format` (String)
- `trim_space` (Boolean)
- `type` (String)


<a id="nestedobjatt--stages--describe_output--file_format--orc"></a>
### Nested Schema for `stages.describe_output.file_format.orc`

Read-Only:

- `null_if` (List of String)
- `replace_invalid_characters` (Boolean)
- `trim_space` (Boolean)
- `type` (String)


<a id="nestedobjatt--stages--describe_output--file_format--parquet"></a>
### Nested Schema for `stages.describe_output.file_format.parquet`

Read-Only:

- `binary_as_text` (Boolean)
- `compression` (String)
- `null_if` (List of String)
- `replace_invalid_characters` (Boolean)
- `trim_space` (Boolean)
- `type` (String)
- `use_logical_type` (Boolean)
- `use_vectorized_scanner` (Boolean)


<a id="nestedobjatt--stages--describe_output--file_format--xml"></a>
### Nested Schema for `stages.describe_output.file_format.xml`

Read-Only:

- `compression` (String)
- `disable_auto_convert` (Boolean)
- `ignore_utf8_errors` (Boolean)
- `preserve_space` (Boolean)
- `replace_invalid_characters` (Boolean)
- `skip_byte_order_mark` (Boolean)
- `strip_outer_element` (Boolean)
- `type` (String)



<a id="nestedobjatt--stages--describe_output--location"></a>
### Nested Schema for `stages.describe_output.location`

Read-Only:

- `aws_access_point_arn` (String)
- `url` (String)


<a id="nestedobjatt--stages--describe_output--privatelink"></a>
### Nested Schema for `stages.describe_output.privatelink`

Read-Only:

- `use_privatelink_endpoint` (Boolean)



<a id="nestedobjatt--stages--show_output"></a>
### Nested Schema for `stages.show_output`

Read-Only:

- `cloud` (String)
- `comment` (String)
- `created_on` (String)
- `database_name` (String)
- `directory_enabled` (Boolean)
- `endpoint` (String)
- `has_credentials` (Boolean)
- `has_encryption_key` (Boolean)
- `name` (String)
- `owner` (String)
- `owner_role_type` (String)
- `region` (String)
- `schema_name` (String)
- `storage_integration` (String)
- `type` (String)
- `url` (String)
